<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>

<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="">

<title>Spring eCommerce</title>


<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
	crossorigin="anonymous">


<link th:href="@{/css/style.css}" rel="stylesheet" type="text/css">




<!-- -Parte de alertas personalizadas -->
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>


<link
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
	rel="stylesheet">

<!-- Custom styles for this template -->
<link th:href="@{/css/Estilos.css}" rel="stylesheet">



</head>

<body>


	<!-- Se reutiliza la cabecera de la plantilla -->
	<header th:include="usuarios/plantillausuario.html::2header">
	</header>
	<br>
	<br>
	<!-- Page Content -->
	<div class="container">


		<!-- Page Heading/Breadcrumbs -->
		<h1 class="mt-4 mb-3">
			Resumen de la orden 
		</h1>

		<ol class="breadcrumb">
			<li class="breadcrumb-item"><a th:href="@{/Carrito/Listar}">Carrito</a></li>
			<li class="breadcrumb-item active">Orden</li>
		</ol>

		<!-- Blog Post -->
		<div class="card mb-4">
			<div class="card-body">
				<div class="row">
					<div class="col-lg-9">
						<div class="card-body">
							<h5 class="card-title">DATOS ORDEN</h5>
							<h6 th:text="'Nombre: '+ ${user.nombre}"></h6>
							<h6 th:text="'Correo: '+ ${user.correo}"></h6>
							<h6 th:text="'Direccion: '+ ${user.direccion}"></h6>

							<h5 class="card-title">PRODUCTOS</h5>
							<div class="alert alert-light" role="alert">
								<table class="table">
									<thead>
										<tr>
											<th scope="col">Producto</th>
											<th scope="col">Precio</th>
											<th scope="col">Cantidad</th>
											<th scope="col">Total</th>

										</tr>
									</thead>
									<tbody>
										<tr th:each="ordenCarro:${carro}">
											<td th:text="${ordenCarro.nombre}"></td>
											<td th:text="${#numbers.formatDecimal(ordenCarro.precio, 0, 'POINT', 0, 'COMMA')}"></td>
											<td th:text="${ordenCarro.cantidad}"></td>
											<td th:text="${#numbers.formatDecimal(ordenCarro.total, 0, 'POINT', 0, 'COMMA')}"></td>
										</tr>
									</tbody>
								</table>
							</div>

						</div>
					</div>
					<div class="col-lg-3">
						<ul class="list-group">
							<li class="list-group-item">
							<h4>Total a pagar</h4>
							<h5  th:text="${#numbers.formatDecimal(orden.total, 0, 'POINT', 0, 'COMMA')}"></h5>
							</li>
							<a th:href="@{GuardarOrden}" class="btn btn-dark" onclick="confirmarRedireccion(event, this)">Generar</a>
							
						</ul>
					</div>
					
				</div>
			</div>
		</div>
	</div>


	<!-- /.container -->
	<!-- Reutilizacion del pie de pagina -->
	<div th:include="usuarios/plantillausuario.html::footer"></div>
	
	<script>
	function confirmarRedireccion(event, element) {
	    
	    Swal.fire({
            icon: 'success',
            title: 'La factura sera enviada a su correo electronico',
            showConfirmButton: false,
            timer: 1000
        });
	}
	
	
	
	
	</script>

</body>

</html>
